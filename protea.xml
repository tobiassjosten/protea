<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE muclient>
<muclient>



<!--- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- MUSHCLIENT METADATA                                                    -->
<!--- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

<plugin
	name="Protea"
	author="Tobias SjÃ¶sten"
	id="31fd8b9ee4f0937c4b584303"
	language="Lua"
	purpose="Viagra for your e-peen"
	save_state="y"
	date_written="2009-09-26 14:06:14"
	version="1.0"
>
	<description trim="y">Protea is a gaming enhancement system tailored for Iron Realms Entertainment MUDs.</description>
</plugin>



<!--- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
<!-- PROTEA INTERFACE                                                       -->
<!--- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->

<script><![CDATA[

-- === === === === === === === === === === === === === === === === === === ====
-- LOAD MODULES
-- === === === === === === === === === === === === === === === === === === ====

PROTEA_PATH = GetPluginInfo(GetPluginID(), 6):gsub('protea.xml', '')
package.path = package.path .. ';' .. PROTEA_PATH .. '?.lua'

protea = require 'core.init'



-- === === === === === === === === === === === === === === === === === === ====
-- MUSHCLIENT PLUGIN CALLBACKS
-- === === === === === === === === === === === === === === === === === === ====

host2realm =
{
	['achaea.com'] = 'achaea',
	['aetolia.com'] = 'aetolia',
	['imperian.com'] = 'imperian',
	['lusternia.com'] = 'lusternia',
}

function OnPluginConnect()
	local realm = host2realm[GetInfo(1)]
	if realm then
		SendPkt(atcp:Initialize())
		protea:Environment('realm', realm)
	end
end -- OnPluginConnect()

if not GetInfo(106) then
	local realm = host2realm[GetInfo(1)]
	if realm then
		protea:Environment('realm', realm)
	end
end

function OnPluginDisconnect()
	protea:EnvironmentReset()
end -- OnPluginDisconnect()

]]></script>



</muclient>
